#!/bin/sh

if [ $# -eq 0 ]; then
	echo "Usage: $0 <countdown time in minutes>"
	exit 1
fi

# Countdown time in minutes
COUNTDOWN=$1

# Convert minutes to seconds
let "time=COUNTDOWN * 60"

# Sound file to play at the end
SOUND_FILE="$HOME/.local/share/taiko.mp3"

# Countdown loop
while [ $time -gt 0 ]; do
  # Clear the screen
  clear

  # Calculate minutes and seconds from remaining time
  let "mins=time / 60"
  let "secs=time % 60"

  # Format and display the timer
  printf "Time remaining: %02d:%02d\n" $mins $secs

  # Decrease time by one second and wait for a second
  let "time=time - 1"
  sleep 1
done

# Play the sound file at the end of the countdown
# mpg123 "$SOUND_FILE"  # Use mpg123, afplay, or aplay depending on your system
mpg123 "$SOUND_FILE"

# Optional: Display a message when the timer ends
echo "Time's up!"
